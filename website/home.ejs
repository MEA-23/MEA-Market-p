<!DOCTYPE html>
<html>
<%-include('./blocks/head')%>
<body>

    <%-include('./blocks/nav')%>



	
		<%if (dataObj){%>
			<div class="col-md-12">
				<div class="jumbotron text-center">
					<h1 class="display-4 text-primary mb-4">Welcome, <%= dataObj.first_name %></h1>
				</div>
			</div>  
			<br>
			<%} else{%>
				<div class="col-md-12">
					<div class="jumbotron text-center">
						<h1 class="display-4 text-primary mb-4">Welcome!</h1>
					</div>
				</div>  
			
				<br>
				<%}%>


			

		<% if (products){%>

		 <%if (admin){%>

			<div class="container my-4">
				<div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4">
	
					<%for ( var product of products){%>
					
						<div class="col" id="<%=product._id.toString()%>">
							<div class="card">
							  <img src="/imges/<%=product.product_image%>" class="card-img-top" alt="Card Image">
							  <div class="card-body text-center">
								<h5 class="card-title"><%=product.product_name%></h5>
								<p class="card-text"><%=product.product_description%></p>
								<p class="card-text">Price: $<%=product.product_price%></p>
								<p class="card-text">Category: <%=product.product_category%></p>
							  </div>
							  <div class="card-footer">
								<button type="button" class="btn btn-success m-2 showItemButton">Show product</button>
								<button type="button" class="btn btn-danger m-2 removebuttonforclint">Dellete product</button>
							  </div>
							</div>
						  </div>
				  
		
				<%}%>
				  </div>
			</div>

			<script src="/script/home.js"></script>
			<%} else if (dataObj) {%>
					<!-- signed in as user -->
				<div class="container my-4">
					<div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4">
		
						<%for ( var product of products){%>
							<div class="col" id="<%=product._id.toString()%>">
								<div class="card">
								  <img src="/imges/<%=product.product_image%>" class="card-img-top" alt="Card Image">
								  <div class="card-body text-center">
									<h5 class="card-title"><%=product.product_name%></h5>
									<p class="card-text"><%=product.product_description%></p>
									<p class="card-text">Price: $<%=product.product_price%></p>
									<p class="card-text">Category: <%=product.product_category%></p>
								  </div>
								  <div class="card-footer">
									<button type="button" class="btn btn-success m-2 showItemButton">Show product</button>
									<% if (dataObj.cart.find(item => item == product._id.toString())){ %>
										<button type="button" id="<%= product._id%>" class="btn btn-primary m-2 addToCartButton">Added</button>
									<%} else{%>
										<button type="button" id="<%= product._id%>" class="btn btn-primary m-2 addToCartButton">Add to Cart</button>
									<%}%>
								  </div>
								</div>
							  </div>
						<%}%>
						</div>
					</div>
					
					<%} else{%>
					<div class="container my-4">
						<div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4">
			
							<%for ( var product of products){%>
								<div class="col" id="<%=product._id.toString()%>">
									<div class="card">
									  <img src="/imges/<%=product.product_image%>" class="card-img-top" alt="Card Image">
									  <div class="card-body text-center">
										<h5 class="card-title"><%=product.product_name%></h5>
										<p class="card-text"><%=product.product_description%></p>
										<p class="card-text">Price: $<%=product.product_price%></p>
										<p class="card-text">Category: <%=product.product_category%></p>
									  </div>
									  <div class="card-footer">
										<button type="button" class="btn btn-success m-2 showItemButton">Show product</button>
									
											<a type="button" href="/signin" id="<%= product._id%>" class="btn btn-primary m-2 addToCartButton">Add To Cart</a>
						
									  </div>
									</div>
								  </div>
						                                     <% } %>


							</div>
						</div>

				
				    <%}%>

		  <%} else{%>
			<div class="jumbotron text-center"></div>
			<h2 class="m-4 text-center" >There is no products at the moment, come back later</h2>
			
			<%}%>

	
	<footer></footer>
	
	<% if (dataObj){ %><script src="/script/addToCart.js"></script><%}%>

	<script src="/script/homeClint.js"></script>
</body>
</html>